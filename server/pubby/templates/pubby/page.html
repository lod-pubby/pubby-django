<!DOCTYPE html>
{% load static %}

<html>
  <head>
    <link rel="stylesheet" type="text/css" href="{% static 'pubby/styles.css' %}">
    <script rel="javascript" src="{% static 'pubby/scripts.js' %}"></script>
    <title>
      {{resource_label}}
    </title>
  </head>
  <body>
    {% include "pubby/nav.html" with URI=URI %}
    <div>
      <h1>{{resource_label}}</h1>
      <table class="resource">
        <tr><th>Property</th><th>Value</th></tr>
        {% for predicate in sparql_data %}
        <tr>
          <td>
            {% include "pubby/predicate_link.html" with predicate=predicate %}
          </td>
          <td>
            {% if predicate.num_objects == 1 %}
            {% include "pubby/object_link.html" with object=predicate.objects.0 %}
            {% else %}
            <ul>
              {% for object in predicate.objects %}
              <li>{% include "pubby/object_link.html" with object=object %}</li>
              {% endfor %}
            </ul>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </table>
    </div>
    <div id="ont_table">
      <script>
       fetch("http://127.0.0.1:8002/jvmg/{{URI}}").then(
         function(response) {
           return response.text()
         }
       ).then(function (text) {
         console.log(text)
         document.getElementById("ont_table").innerHTML = text
       });
      </script>
    </div>
  </body>
</html>
